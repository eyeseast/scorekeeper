var app=function(){"use strict";function t(){}function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t,e){for(var n in e)t[n]=1;return t}function r(t){t()}function s(t,e){t.appendChild(e)}function o(t,e,n){t.insertBefore(e,n)}function i(t){t.parentNode.removeChild(t)}function a(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function c(){return document.createDocumentFragment()}function l(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function h(){return document.createComment("")}function d(t,e,n,r){t.addEventListener(e,n,r)}function f(t,e,n,r){t.removeEventListener(e,n,r)}function p(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function m(t,e){t.data=""+e}function _(){return Object.create(null)}function g(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function y(t,e){return t!=t?e==e:t!==e}function v(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1){var s=n[r];if(!s.__calling)try{s.__calling=!0,s.call(this,e)}finally{s.__calling=!1}}}function b(t){t._lock=!0,C(t._beforecreate),C(t._oncreate),C(t._aftercreate),t._lock=!1}function $(){return this._state}function x(t,e){t._handlers=_(),t._slots=_(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function w(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function C(t){for(;t&&t.length;)t.shift()()}function N(){this.store._remove(this)}var k={destroy:function(e){this.destroy=t,this.fire("destroy"),this.set=t,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:$,fire:v,on:w,set:function(t){this._set(e({},t)),this.root._lock||b(this.root)},_recompute:t,_set:function(t){var n=this._state,r={},s=!1;for(var o in t=e(this._staged,t),this._staged={},t)this._differs(t[o],n[o])&&(r[o]=s=!0);s&&(this._state=e(e({},n),t),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(this.fire("state",{changed:r,current:this._state,previous:n}),this._fragment.p(r,this._state),this.fire("update",{changed:r,current:this._state,previous:n})))},_stage:function(t){e(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:g},L={setPlayers(t){t.preventDefault();const{form:e,newplayer:n}=this.refs;let r;r=e.elements.players.length?Array.from(e.elements.players).map(t=>t.value).filter(Boolean):[e.elements.players.value],this.store.set({players:r}),n.value=""},removePlayer(t){const e=this.store.get().players.filter((e,n)=>n!==t);this.store.set({players:e})},start(t){this.setPlayers.call(this,t),this.store.set({started:!0})}};function O(t){const{component:e,ctx:n}=this._svelte;e.removePlayer(n.i)}function P(t,e,n){const r=Object.create(t);return r.player=e[n],r.i=n,r}function S(t,e){var n,r,a,c,h;return{c(){n=l("div"),r=l("input"),c=u("\n        "),(h=l("button")).textContent="x",p(r,"type","text"),r.value=a=e.player,r.name="players",h._svelte={component:t,ctx:e},d(h,"click",O),h.type="button",h.className="button",h.title="Remove this player"},m(t,e){o(t,n,e),s(n,r),s(n,c),s(n,h)},p(t,n){e=n,t.$players&&a!==(a=e.player)&&(r.value=a),h._svelte.ctx=e},d(t){t&&i(n),f(h,"click",O)}}}function j(t){x(this,t),this.refs={},this._state=e(this.store._init(["players"]),t.data),this.store._add(this,["players"]),this._intro=!!t.intro,this._handlers.destroy=[N],this._fragment=function(t,e){for(var n,c,h,m,_,g,y,v,b,$,x=e.$players,w=[],C=0;C<x.length;C+=1)w[C]=S(t,P(e,x,C));function N(e){t.start(e)}function k(e){t.setPlayers(e)}return{c(){n=l("form"),c=l("div"),h=l("input"),m=u("\n        "),(_=l("button")).textContent="Add",g=u("\n    ");for(var t=0;t<w.length;t+=1)w[t].c();y=u("\n\n    "),v=l("div"),b=l("input"),p(h,"type","text"),h.name="players",h.placeholder="Add a player",_.className="button button-primary",d(b,"click",N),p(b,"type","submit"),b.value="start",d(n,"submit",k),n.className="row"},m(e,r){o(e,n,r),s(n,c),s(c,h),t.refs.newplayer=h,s(c,m),s(c,_),s(n,g);for(var i=0;i<w.length;i+=1)w[i].m(n,null);s(n,y),s(n,v),s(v,b),t.refs.form=n,$=!0},p(e,r){if(e.$players){x=r.$players;for(var s=0;s<x.length;s+=1){const o=P(r,x,s);w[s]?w[s].p(e,o):(w[s]=S(t,o),w[s].c(),w[s].m(n,y))}for(;s<w.length;s+=1)w[s].d(1);w.length=x.length}},i(t,e){$||this.m(t,e)},o:r,d(e){e&&i(n),t.refs.newplayer===h&&(t.refs.newplayer=null),a(w,e),f(b,"click",N),f(n,"submit",k),t.refs.form===n&&(t.refs.form=null)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor)),this._intro=!0}e(j.prototype,k),e(j.prototype,L);var E=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).toLowerCase()},R=function(t){var e="",n=Object.keys(t);return n.forEach(function(r,s){var o=t[r];(function(t){return/[height|width]$/.test(t)})(r=E(r))&&"number"==typeof o&&(o+="px"),e+=!0===o?r:!1===o?"not "+r:"("+r+": "+o+")",s<n.length-1&&(e+=" and ")}),e},A=function(t){var e="";return"string"==typeof t?t:t instanceof Array?(t.forEach(function(n,r){e+=R(n),r<t.length-1&&(e+=", ")}),e):R(t)};var M={updateMatches(t){this.mediaQueryList&&this.set({matches:this.mediaQueryList.matches})}};function Q(){this.mediaQueryList&&this.mediaQueryList.removeListener(this.updateMatches)}function q(e,n){var r,s,a=e._slotted.default;return{c:t,m(t,e){a&&(o(t,r||(r=h()),e),o(t,a,e),o(t,s||(s=h()),e))},d(t){a&&(!function(t,e,n){for(;t.nextSibling&&t.nextSibling!==e;)n.appendChild(t.parentNode.removeChild(t.nextSibling))}(r,s,a),i(r),i(s))}}}function D(t){var s,a,c,l,u;x(this,t),this._state=e({matches:!0,query:null},t.data),this._intro=!!t.intro,this._handlers.destroy=[Q],this._slotted=t.slots||{},this._fragment=(s=this,a=this._state,u=a.matches&&q(s),{c(){u&&u.c(),c=h()},m(t,e){u&&u.m(t,e),o(t,c,e),l=!0},p(t,e){e.matches?u||((u=q(s)).c(),u.m(c.parentNode,c)):u&&(u.d(1),u=null)},i(t,e){l||this.m(t,e)},o:r,d(t){u&&u.d(t),t&&i(c)}}),this.root._oncreate.push(()=>{(function(){const{query:t}=this.get();this.updateMatches=this.updateMatches.bind(this),this.mediaQueryList=window.matchMedia(t),this.mediaQueryList.addListener(this.updateMatches),this.updateMatches()}).call(this),this.fire("update",{changed:n({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),b(this)),this._intro=!0}e(D.prototype,k),e(D.prototype,M);var B={nextRound(){const{rounds:t,players:e}=this.store.get(),n=e.reduce((t,e)=>(t[e]=0,t),{});t.push(n),this.store.set({rounds:t})},removeRound(t){let{rounds:e}=this.store.get();e=e.filter((e,n)=>n!==t),this.store.set({rounds:e})},updateScore(t,e,n){const{rounds:r}=this.store.get(),s=+t.target.value,o=r.map((t,r)=>(r===n&&(t[e]=s),t));this.store.set({rounds:o})}};function I(t,e,n){const r=Object.create(t);return r.player=e[n],r}function J(t){const{component:e,ctx:n}=this._svelte;e.removeRound(n.i)}function T(t){const{component:e,ctx:n}=this._svelte;e.updateScore(t,n.player,n.i)}function W(t,e,n){const r=Object.create(t);return r.player=e[n],r}function F(t,e,n){const r=Object.create(t);return r.round=e[n],r.i=n,r}function X(t,e,n){const r=Object.create(t);return r.player=e[n],r.i=n,r}function Z(t){const{component:e,ctx:n}=this._svelte;e.updateScore(t,n.player,n.i)}function z(t,e,n){const r=Object.create(t);return r.player=e[n],r}function G(t){const{component:e,ctx:n}=this._svelte;e.removeRound(n.i)}function H(t,e,n){const r=Object.create(t);return r.round=e[n],r.i=n,r}function K(t,e){var n,r,a,c,h,_,g,y=e.player;return{c(){n=l("dt"),r=l("label"),a=l("span"),c=u(y),h=u("\n                        "),(_=l("input"))._svelte={component:t,ctx:e},d(_,"input",Z),p(_,"type","number"),_.value=g=e.round[e.player],r.className="svelte-c1ugnr",n.className="svelte-c1ugnr"},m(t,e){o(t,n,e),s(n,r),s(r,a),s(a,c),s(r,h),s(r,_)},p(t,n){e=n,t.$players&&y!==(y=e.player)&&m(c,y),_._svelte.ctx=e,(t.$rounds||t.$players)&&g!==(g=e.round[e.player])&&(_.value=g)},d(t){t&&i(n),f(_,"input",Z)}}}function U(t,e){for(var n,r,c,h,p,m,_,g,y=e.i+1,v=e.$players,b=[],$=0;$<v.length;$+=1)b[$]=K(t,z(e,v,$));return{c(){n=l("header"),r=l("h2"),c=u("Round "),h=u(y),p=u("\n                "),(m=l("button")).textContent="X",_=u("\n\n            "),g=l("dl");for(var s=0;s<b.length;s+=1)b[s].c();r.className="svelte-c1ugnr",m._svelte={component:t,ctx:e},d(m,"click",G),m.className="x-round button svelte-c1ugnr",n.className="svelte-c1ugnr"},m(t,e){o(t,n,e),s(n,r),s(r,c),s(r,h),s(n,p),s(n,m),o(t,_,e),o(t,g,e);for(var i=0;i<b.length;i+=1)b[i].m(g,null)},p(n,r){if(e=r,m._svelte.ctx=e,n.$rounds||n.$players){v=e.$players;for(var s=0;s<v.length;s+=1){const r=z(e,v,s);b[s]?b[s].p(n,r):(b[s]=K(t,r),b[s].c(),b[s].m(g,null))}for(;s<b.length;s+=1)b[s].d(1);b.length=v.length}},d(t){t&&i(n),f(m,"click",G),t&&(i(_),i(g)),a(b,t)}}}function V(t,e){var n,r,a=e.player;return{c(){n=l("th"),r=u(a)},m(t,e){o(t,n,e),s(n,r)},p(t,e){t.$players&&a!==(a=e.player)&&m(r,a)},d(t){t&&i(n)}}}function Y(t,e){var n,r,a;return{c(){n=l("td"),(r=l("input"))._svelte={component:t,ctx:e},d(r,"input",T),p(r,"type","number"),r.value=a=e.round[e.player]},m(t,e){o(t,n,e),s(n,r)},p(t,n){e=n,r._svelte.ctx=e,(t.$rounds||t.$players)&&a!==(a=e.round[e.player])&&(r.value=a)},d(t){t&&i(n),f(r,"input",T)}}}function tt(t,e){for(var n,r,c,h,p,m,_,g=e.i+1,y=e.$players,v=[],b=0;b<y.length;b+=1)v[b]=Y(t,W(e,y,b));return{c(){n=l("tr"),r=l("td"),c=u(g),h=u("\n                ");for(var s=0;s<v.length;s+=1)v[s].c();p=u("\n\n                "),m=l("td"),(_=l("button")).textContent="x",_._svelte={component:t,ctx:e},d(_,"click",J),_.className="x-round button svelte-c1ugnr"},m(t,e){o(t,n,e),s(n,r),s(r,c),s(n,h);for(var i=0;i<v.length;i+=1)v[i].m(n,null);s(n,p),s(n,m),s(m,_)},p(r,s){if(e=s,r.$rounds||r.$players){y=e.$players;for(var o=0;o<y.length;o+=1){const s=W(e,y,o);v[o]?v[o].p(r,s):(v[o]=Y(t,s),v[o].c(),v[o].m(n,p))}for(;o<v.length;o+=1)v[o].d(1);v.length=y.length}_._svelte.ctx=e},d(t){t&&i(n),a(v,t),f(_,"click",J)}}}function et(t,e){var n,r,a=e.totals[e.player]||0;return{c(){n=l("td"),r=u(a)},m(t,e){o(t,n,e),s(n,r)},p(t,e){(t.totals||t.$players)&&a!==(a=e.totals[e.player]||0)&&m(r,a)},d(t){t&&i(n)}}}function nt(t){x(this,t),this._state=e(this.store._init(["rounds","players"]),t.data),this.store._add(this,["rounds","players"]),this._recompute({$rounds:1},this._state),this._intro=!!t.intro,this._handlers.destroy=[N],this._fragment=function(t,e){for(var n,r,h,p,m,_,g,y,v,b,$,x,w,C,N,k,L,O,P,S,j,E,R,M,Q=e.$rounds,q=[],B=0;B<Q.length;B+=1)q[B]=U(t,H(e,Q,B));var J={query:A({maxWidth:600})},T=new D({root:t.root,store:t.store,slots:{default:c()},data:J}),W=e.$players,Z=[];for(B=0;B<W.length;B+=1)Z[B]=V(0,X(e,W,B));var z=e.$rounds,G=[];for(B=0;B<z.length;B+=1)G[B]=tt(t,F(e,z,B));var K=e.$players,Y=[];for(B=0;B<K.length;B+=1)Y[B]=et(0,I(e,K,B));var nt={query:A({minWidth:601})},rt=new D({root:t.root,store:t.store,slots:{default:c()},data:nt});function st(e){t.nextRound()}function ot(e){t.store.set({started:!1})}return{c(){n=l("div"),r=l("div");for(var t=0;t<q.length;t+=1)q[t].c();for(T._fragment.c(),h=u("\n\n    "),p=l("table"),m=l("thead"),_=l("tr"),(g=l("th")).textContent="Round #",y=u("\n                "),t=0;t<Z.length;t+=1)Z[t].c();for(v=u("\n                "),(b=l("th")).textContent="Discard",$=u("\n        "),x=l("tbody"),t=0;t<G.length;t+=1)G[t].c();for(w=u("\n\n            "),C=l("tr"),(N=l("td")).textContent="Totals:",k=u("\n                "),t=0;t<Y.length;t+=1)Y[t].c();L=u("\n                "),O=l("td"),rt._fragment.c(),P=u("\n\n    "),S=l("div"),(j=l("button")).textContent="Next round",E=u("\n        "),(R=l("button")).textContent="Change players",r.className="twelve columns",C.className="totals",p.className="twelve columns",d(j,"click",st),j.className="button button-primary",d(R,"click",ot),R.className="button",n.className="row"},m(t,e){o(t,n,e),s(T._slotted.default,r);for(var i=0;i<q.length;i+=1)q[i].m(r,null);for(T._mount(n,null),s(n,h),s(rt._slotted.default,p),s(p,m),s(m,_),s(_,g),s(_,y),i=0;i<Z.length;i+=1)Z[i].m(_,null);for(s(_,v),s(_,b),s(p,$),s(p,x),i=0;i<G.length;i+=1)G[i].m(x,null);for(s(x,w),s(x,C),s(C,N),s(C,k),i=0;i<Y.length;i+=1)Y[i].m(C,null);s(C,L),s(C,O),rt._mount(n,null),s(n,P),s(n,S),s(S,j),s(S,E),s(S,R),M=!0},p(e,n){if(e.$players||e.$rounds){Q=n.$rounds;for(var s=0;s<Q.length;s+=1){const o=H(n,Q,s);q[s]?q[s].p(e,o):(q[s]=U(t,o),q[s].c(),q[s].m(r,null))}for(;s<q.length;s+=1)q[s].d(1);q.length=Q.length}if(e.$players){for(W=n.$players,s=0;s<W.length;s+=1){const t=X(n,W,s);Z[s]?Z[s].p(e,t):(Z[s]=V(0,t),Z[s].c(),Z[s].m(_,v))}for(;s<Z.length;s+=1)Z[s].d(1);Z.length=W.length}if(e.$players||e.$rounds){for(z=n.$rounds,s=0;s<z.length;s+=1){const r=F(n,z,s);G[s]?G[s].p(e,r):(G[s]=tt(t,r),G[s].c(),G[s].m(x,w))}for(;s<G.length;s+=1)G[s].d(1);G.length=z.length}if(e.totals||e.$players){for(K=n.$players,s=0;s<K.length;s+=1){const t=I(n,K,s);Y[s]?Y[s].p(e,t):(Y[s]=et(0,t),Y[s].c(),Y[s].m(C,L))}for(;s<Y.length;s+=1)Y[s].d(1);Y.length=K.length}},i(t,e){M||this.m(t,e)},o(t){var e,n;M&&(e=t,0==(n=2)&&e(),t=(()=>{--n||e()}),T&&T._fragment.o(t),rt&&rt._fragment.o(t),M=!1)},d(t){t&&i(n),a(q,t),T.destroy(),a(Z,t),a(G,t),a(Y,t),rt.destroy(),f(j,"click",st),f(R,"click",ot)}}}(this,this._state),this.root._oncreate.push(()=>{(function(){const{rounds:t}=this.store.get();t.length<1&&this.nextRound()}).call(this),this.fire("update",{changed:n({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),b(this)),this._intro=!0}function rt(t,e){var n,r=new j({root:t.root,store:t.store});return t.refs.choose=r,{c(){r._fragment.c()},m(t,e){r._mount(t,e),n=!0},i(t,e){n||this.m(t,e)},o(t){n&&(r&&r._fragment.o(t),n=!1)},d(e){r.destroy(e),t.refs.choose===r&&(t.refs.choose=null)}}}function st(t,e){var n,r=new nt({root:t.root,store:t.store});return t.refs.play=r,{c(){r._fragment.c()},m(t,e){r._mount(t,e),n=!0},i(t,e){n||this.m(t,e)},o(t){n&&(r&&r._fragment.o(t),n=!1)},d(e){r.destroy(e),t.refs.play===r&&(t.refs.play=null)}}}function ot(t){x(this,t),this.refs={},this._state=e(this.store._init(["started"]),t.data),this.store._add(this,["started"]),this._intro=!!t.intro,this._handlers.destroy=[N],this._fragment=function(t,e){var n,r,a,c,h,d,f=[st,rt],p=[];function m(t){return t.$started?0:1}return c=m(e),h=p[c]=f[c](t,e),{c(){n=l("div"),(r=l("h1")).textContent="Scorekeeper",a=u("\n\n    "),h.c(),n.className="container"},m(t,e){o(t,n,e),s(n,r),s(n,a),p[c].m(n,null),d=!0},p(e,r){var s=c;(c=m(r))!==s&&(h.o(function(){p[s].d(1),p[s]=null}),(h=p[c])||(h=p[c]=f[c](t,r)).c(),h.m(n,null))},i(t,e){d||this.m(t,e)},o(t){d&&(h?h.o(t):t(),d=!1)},d(t){t&&i(n),p[c].d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),b(this)),this._intro=!0}function it(t,n){this._handlers={},this._dependents=[],this._computed=_(),this._sortedComputedProperties=[],this._state=e({},t),this._differs=n&&n.immutable?y:g}e(nt.prototype,k),e(nt.prototype,B),nt.prototype._recompute=function(t,e){t.$rounds&&this._differs(e.totals,e.totals=function({$rounds:t}){return t.reduce((t,e)=>{for(let n in e)t[n]=(t[n]||0)+e[n];return t},{})}(e))&&(t.totals=!0)},e(ot.prototype,k),e(it.prototype,{_add(t,e){this._dependents.push({component:t,props:e})},_init(t){const e={};for(let n=0;n<t.length;n+=1){const r=t[n];e["$"+r]=this._state[r]}return e},_remove(t){let e=this._dependents.length;for(;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_set(t,n){const r=this._state;this._state=e(e({},r),t);for(let t=0;t<this._sortedComputedProperties.length;t+=1)this._sortedComputedProperties[t].update(this._state,n);this.fire("state",{changed:n,previous:r,current:this._state}),this._dependents.filter(t=>{const e={};let r=!1;for(let s=0;s<t.props.length;s+=1){const o=t.props[s];o in n&&(e["$"+o]=this._state[o],r=!0)}if(r)return t.component._stage(e),!0}).forEach(t=>{t.component.set({})}),this.fire("update",{changed:n,previous:r,current:this._state})},_sortComputedProperties(){const t=this._computed,e=this._sortedComputedProperties=[],n=_();let r;function s(o){const i=t[o];i&&(i.deps.forEach(t=>{if(t===r)throw new Error(`Cyclical dependency detected between ${t} <-> ${o}`);s(t)}),n[o]||(n[o]=!0,e.push(i)))}for(const t in this._computed)s(r=t)},compute(t,n,r){let s;const o={deps:n,update:(e,o,i)=>{const a=n.map(t=>(t in o&&(i=!0),e[t]));if(i){const n=r.apply(null,a);this._differs(n,s)&&(s=n,o[t]=!0,e[t]=s)}}};this._computed[t]=o,this._sortComputedProperties();const i=e({},this._state),a={};o.update(i,a,!0),this._set(i,a)},fire:v,get:$,on:w,set(t){const e=this._state,n=this._changed={};let r=!1;for(const s in t){if(this._computed[s])throw new Error(`'${s}' is a read-only computed property`);this._differs(t[s],e[s])&&(n[s]=r=!0)}r&&this._set(t,n)}});const at=new it({players:[],rounds:[],started:!1});return window.store=at,function(t,e){const n=localStorage.getItem(e);n&&t.set(JSON.parse(n)),t.on("state",({current:t,previous:n,changed:r})=>{localStorage.setItem(e,JSON.stringify(t))})}(at,"scorekeeper"),new ot({target:document.body,store:at})}();
//# sourceMappingURL=bundle.js.map
