var app=function(){"use strict";function t(){}function e(t){for(var e,n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(e in n)t[e]=n[e]}return t}function n(t,e){e.appendChild(t)}function r(t,e,n){e.insertBefore(t,n)}function s(t){t.parentNode.removeChild(t)}function o(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function i(){return document.createDocumentFragment()}function a(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function c(){return document.createComment("")}function l(t,e,n){t.addEventListener(e,n,!1)}function h(t,e,n){t.removeEventListener(e,n,!1)}function f(){return Object.create(null)}function d(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function p(t,e){return t!==e||t&&"object"==typeof t||"function"==typeof t}function _(t,e,n,r,s){for(var o in e)if(n[o]){var i=r[o],a=s[o],u=e[o];if(u)for(var c=0;c<u.length;c+=1){var l=u[c];l.__calling||(l.__calling=!0,l.call(t,i,a),l.__calling=!1)}}}function v(t){return t?this._state[t]:this._state}function m(t,e){t._observers={pre:f(),post:f()},t._handlers=f(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function g(t,e,n){var r=n&&n.defer?this._observers.post:this._observers.pre;return(r[t]||(r[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=r[t].indexOf(e);~n&&r[t].splice(n,1)}}}function y(t){for(;t&&t.length;)t.pop()()}function $(){this.store._remove(this)}var b={destroy:d,get:v,fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1)n[r].call(this,e)},observe:g,on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||(this.root._lock=!0,y(this.root._beforecreate),y(this.root._oncreate),y(this.root._aftercreate),this.root._lock=!1)},teardown:d,_recompute:t,_set:function(t){var n=this._state,r={},s=!1;for(var o in t)p(t[o],n[o])&&(r[o]=s=!0);s&&(this._state=e({},n,t),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(_(this,this._observers.pre,r,this._state,n),this._fragment.p(r,this._state),_(this,this._observers.post,r,this._state,n)))},_mount:function(t,e){this._fragment.m(t,e)},_unmount:function(){this._fragment&&this._fragment.u()}};function x(t,e,o,i,c){var f,d,p,_,v;return{c:function(){f=a("div"),d=a("input"),_=u("\n        "),(v=a("button")).textContent="x",this.h()},h:function(){d.type="text",d.value=p=o,d.name="players",v.type="button",v.className="button",v.title="Remove this player",l(v,"click",w),v._svelte={component:c,$players:e,i:i}},m:function(t,e){r(f,t,e),n(d,f),n(_,f),n(v,f)},p:function(t,e,n,r,s){t.$players&&p!==(p=r)&&(d.value=p),v._svelte.$players=n,v._svelte.i=s},u:function(){s(f)},d:function(){h(v,"click",w)}}}function w(t){var e=this._svelte.component,n=(this._svelte.$players,this._svelte.i);e.removePlayer(n)}function C(t){m(this,t),this.refs={},this._state=e(this.store._init(["players"]),t.data),this.store._add(this,["players"]),this._handlers.destroy=[$],this._fragment=function(t,e){for(var i,c,f,d,p,_,v,m,g,y=t.$players,$=[],b=0;b<y.length;b+=1)$[b]=x(0,y,y[b],b,e);function w(t){e.start(t)}function C(t){e.setPlayers(t)}return{c:function(){i=a("form"),c=a("div"),f=a("input"),d=u("\n        "),(p=a("button")).textContent="Add",_=u("\n    ");for(var t=0;t<$.length;t+=1)$[t].c();v=u("\n\n    "),m=a("div"),g=a("input"),this.h()},h:function(){f.type="text",f.name="players",f.placeholder="Add a player",p.className="button button-primary",g.type="submit",g.value="start",l(g,"click",w),i.className="row",l(i,"submit",C)},m:function(t,s){r(i,t,s),n(c,i),n(f,c),e.refs.newplayer=f,n(d,c),n(p,c),n(_,i);for(var o=0;o<$.length;o+=1)$[o].m(i,null);n(v,i),n(m,i),n(g,m),e.refs.form=i},p:function(t,n){var r=n.$players;if(t.$players){for(var s=0;s<r.length;s+=1)$[s]?$[s].p(t,n,r,r[s],s):($[s]=x(0,r,r[s],s,e),$[s].c(),$[s].m(i,v));for(;s<$.length;s+=1)$[s].u(),$[s].d();$.length=r.length}},u:function(){s(i);for(var t=0;t<$.length;t+=1)$[t].u()},d:function(){e.refs.newplayer===f&&(e.refs.newplayer=null),o($),h(g,"click",w),h(i,"submit",C),e.refs.form===i&&(e.refs.form=null)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}e(C.prototype,{setPlayers:function(t){t.preventDefault();var e,n=this.refs,r=n.form,s=n.newplayer;e=r.elements.players.length?Array.from(r.elements.players).map(function(t){return t.value}).filter(Boolean):[r.elements.players.value],this.store.set({players:e}),s.value=""},removePlayer:function(t){var e=this.store.get("players").filter(function(e,n){return n!==t});this.store.set({players:e})},start:function(t){this.setPlayers.call(this,t),this.store.set({started:!0})}},b);var k=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).toLowerCase()},N=function(t){var e="",n=Object.keys(t);return n.forEach(function(r,s){var o=t[r];r=k(r),/[height|width]$/.test(r)&&"number"==typeof o&&(o+="px");e+=!0===o?r:!1===o?"not "+r:"("+r+": "+o+")",s<n.length-1&&(e+=" and ")}),e},L=function(t){var e="";return"string"==typeof t?t:t instanceof Array?(t.forEach(function(n,r){e+=N(n),r<t.length-1&&(e+=", ")}),e):N(t)};function P(){this.mediaQueryList&&this.mediaQueryList.removeListener(this.updateMatches)}function S(e,n){var o,i,a=n._slotted.default;return{c:t,m:function(t,e){a&&(r(o||(o=c()),t,e),r(a,t,e),r(i||(i=c()),t,e))},u:function(){a&&(!function(t,e,n){for(;t.nextSibling&&t.nextSibling!==e;)n.appendChild(t.parentNode.removeChild(t.nextSibling))}(o,i,a),s(o),s(i))},d:t}}function R(t){m(this,t),this._state=e({matches:!0,query:null},t.data),this._handlers.destroy=[P],this._slotted=t.slots||{};var n=function(){var t=this.get().query;this.updateMatches=this.updateMatches.bind(this),this.mediaQueryList=window.matchMedia(t),this.mediaQueryList.addListener(this.updateMatches),this.updateMatches()}.bind(this);t.root?this.root._oncreate.push(n):this._oncreate=[n],this.slots={},this._fragment=function(t,e){var n,o=t.matches&&S(0,e);return{c:function(){o&&o.c(),n=c()},m:function(t,e){o&&o.m(t,e),r(n,t,e)},p:function(t,r){r.matches?o||((o=S(0,e)).c(),o.m(n.parentNode,n)):o&&(o.u(),o.d(),o=null)},u:function(){o&&o.u(),s(n)},d:function(){o&&o.d()}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),y(this._oncreate))}e(R.prototype,{updateMatches:function(t){this.mediaQueryList&&this.set({matches:this.mediaQueryList.matches})}},b);function E(t){e="svelte-1032740323",n="",t.setAttribute(e,n);var e,n}function M(t,e,i,c,f){for(var d,p,_,v,m,g,y,$,b=c+1,x=t.$players,w=[],C=0;C<x.length;C+=1)w[C]=O(t,e,i,c,x,x[C],C,f);return{c:function(){d=a("header"),p=a("h2"),_=u("Round "),v=u(b),m=u("\n                "),(g=a("button")).textContent="X",y=u("\n\n            "),$=a("dl");for(var t=0;t<w.length;t+=1)w[t].c();this.h()},h:function(){E(d),E(p),E(g),g.className="x-round button",l(g,"click",W),g._svelte={component:f,$rounds:e,i:c}},m:function(t,e){r(d,t,e),n(p,d),n(_,p),n(v,p),n(m,d),n(g,d),r(y,t,e),r($,t,e);for(var s=0;s<w.length;s+=1)w[s].m($,null)},p:function(t,e,n,r,s){g._svelte.$rounds=n,g._svelte.i=s;var o=e.$players;if(t.$players||t.$rounds){for(var i=0;i<o.length;i+=1)w[i]?w[i].p(t,e,n,r,s,o,o[i],i):(w[i]=O(e,n,r,s,o,o[i],i,f),w[i].c(),w[i].m($,null));for(;i<w.length;i+=1)w[i].u(),w[i].d();w.length=o.length}},u:function(){s(d),s(y),s($);for(var t=0;t<w.length;t+=1)w[t].u()},d:function(){h(g,"click",W),o(w)}}}function O(t,e,o,i,c,f,d,p){var _,v,m,g,y,$,b,x=f;return{c:function(){_=a("dt"),v=a("label"),m=a("span"),g=u(x),y=u("\n                        "),$=a("input"),this.h()},h:function(){E(_),E(v),$.type="number",$.value=b=o[f],l($,"input",j),$._svelte={component:p,$players:c,player_index:d,$rounds:e,i:i}},m:function(t,e){r(_,t,e),n(v,_),n(m,v),n(g,m),n(y,v),n($,v)},p:function(t,e,n,r,s,o,i,a){t.$players&&x!==(x=i)&&(g.data=x),(t.$rounds||t.$players)&&b!==(b=r[i])&&($.value=b),$._svelte.$players=o,$._svelte.player_index=a,$._svelte.$rounds=n,$._svelte.i=s},u:function(){s(_)},d:function(){h($,"input",j)}}}function q(e,o,i,c,l){var h,f,d=i;return{c:function(){h=a("th"),f=u(d)},m:function(t,e){r(h,t,e),n(f,h)},p:function(t,e,n,r,s){t.$players&&d!==(d=r)&&(f.data=d)},u:function(){s(h)},d:t}}function A(t,e,i,c,f){for(var d,p,_,v,m,g,y,$=c+1,b=t.$players,x=[],w=0;w<b.length;w+=1)x[w]=H(t,e,i,c,b,b[w],w,f);return{c:function(){d=a("tr"),p=a("td"),_=u($),v=u("\n                ");for(var t=0;t<x.length;t+=1)x[t].c();m=u("\n\n                "),g=a("td"),(y=a("button")).textContent="x",this.h()},h:function(){E(y),y.className="x-round button",l(y,"click",B),y._svelte={component:f,$rounds_1:e,i:c}},m:function(t,e){r(d,t,e),n(p,d),n(_,p),n(v,d);for(var s=0;s<x.length;s+=1)x[s].m(d,null);n(m,d),n(g,d),n(y,g)},p:function(t,e,n,r,s){var o=e.$players;if(t.$rounds||t.$players){for(var i=0;i<o.length;i+=1)x[i]?x[i].p(t,e,n,r,s,o,o[i],i):(x[i]=H(e,n,r,s,o,o[i],i,f),x[i].c(),x[i].m(d,m));for(;i<x.length;i+=1)x[i].u(),x[i].d();x.length=o.length}y._svelte.$rounds_1=n,y._svelte.i=s},u:function(){s(d);for(var t=0;t<x.length;t+=1)x[t].u()},d:function(){o(x),h(y,"click",B)}}}function H(t,e,o,i,u,c,f,d){var p,_,v;return{c:function(){p=a("td"),_=a("input"),this.h()},h:function(){_.type="number",_.value=v=o[c],l(_,"input",D),_._svelte={component:d,$players:u,player_index:f,$rounds_1:e,i:i}},m:function(t,e){r(p,t,e),n(_,p)},p:function(t,e,n,r,s,o,i,a){(t.$rounds||t.$players)&&v!==(v=r[i])&&(_.value=v),_._svelte.$players=o,_._svelte.player_index=a,_._svelte.$rounds_1=n,_._svelte.i=s},u:function(){s(p)},d:function(){h(_,"input",D)}}}function Q(e,o,i,c,l){var h,f,d=e.totals[i]||0;return{c:function(){h=a("td"),f=u(d)},m:function(t,e){r(h,t,e),n(f,h)},p:function(t,e,n,r,s){(t.totals||t.$players)&&d!==(d=e.totals[r]||0)&&(f.data=d)},u:function(){s(h)},d:t}}function W(t){var e=this._svelte.component,n=(this._svelte.$rounds,this._svelte.i);e.removeRound(n)}function j(t){var e=this._svelte.component,n=this._svelte.$players[this._svelte.player_index],r=(this._svelte.$rounds,this._svelte.i);e.updateScore(t,n,r)}function D(t){var e=this._svelte.component,n=this._svelte.$players[this._svelte.player_index],r=(this._svelte.$rounds_1,this._svelte.i);e.updateScore(t,n,r)}function B(t){var e=this._svelte.component,n=(this._svelte.$rounds_1,this._svelte.i);e.removeRound(n)}function I(t){m(this,t),this._state=e(this.store._init(["rounds","players"]),t.data),this.store._add(this,["rounds","players"]),this._recompute({$rounds:1},this._state),this._handlers.destroy=[$];var c=function(){this.store.get("rounds").length<1&&this.nextRound()}.bind(this);t.root?this.root._oncreate.push(c):(this._oncreate=[c],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){for(var c,f,d,p,_,v,m,g,y,$,b,x,w,C,k,N,P,S,E,O,H,W,j,D,B,I,J,T=t.$rounds,F=[],X=0;X<T.length;X+=1)F[X]=M(t,T,T[X],X,e);var Z=new R({root:e.root,slots:{default:i()},data:{query:L({maxWidth:600})}}),z=t.$players,G=[];for(X=0;X<z.length;X+=1)G[X]=q(0,0,z[X]);var K=t.$rounds,U=[];for(X=0;X<K.length;X+=1)U[X]=A(t,K,K[X],X,e);var V=t.$players,Y=[];for(X=0;X<V.length;X+=1)Y[X]=Q(t,0,V[X]);var tt=new R({root:e.root,slots:{default:i()},data:{query:L({minWidth:601})}});function et(t){e.nextRound()}function nt(t){e.store.set({started:!1})}return{c:function(){c=a("div"),f=u("\n        "),d=a("div");for(var t=0;t<F.length;t+=1)F[t].c();for(p=u("\n    "),Z._fragment.c(),_=u("\n\n    "),v=u("\n    "),m=a("table"),g=a("thead"),y=a("tr"),($=a("th")).textContent="Round #",b=u("\n                "),t=0;t<G.length;t+=1)G[t].c();for(x=u("\n                "),(w=a("th")).textContent="Discard",C=u("\n        "),k=a("tbody"),t=0;t<U.length;t+=1)U[t].c();for(N=u("\n\n            "),P=a("tr"),(S=a("td")).textContent="Totals:",E=u("\n                "),t=0;t<Y.length;t+=1)Y[t].c();O=u("\n                "),H=a("td"),W=u("\n    "),tt._fragment.c(),j=u("\n\n    "),D=a("div"),(B=a("button")).textContent="Next round",I=u("\n        "),(J=a("button")).textContent="Change players",this.h()},h:function(){d.className="twelve columns",P.className="totals",m.className="twelve columns",B.className="button button-primary",l(B,"click",et),J.className="button",l(J,"click",nt),c.className="row"},m:function(t,e){r(c,t,e),n(f,Z._slotted.default),n(d,Z._slotted.default);for(var s=0;s<F.length;s+=1)F[s].m(d,null);for(n(p,Z._slotted.default),Z._mount(c,null),n(_,c),n(v,tt._slotted.default),n(m,tt._slotted.default),n(g,m),n(y,g),n($,y),n(b,y),s=0;s<G.length;s+=1)G[s].m(y,null);for(n(x,y),n(w,y),n(C,m),n(k,m),s=0;s<U.length;s+=1)U[s].m(k,null);for(n(N,k),n(P,k),n(S,P),n(E,P),s=0;s<Y.length;s+=1)Y[s].m(P,null);n(O,P),n(H,P),n(W,tt._slotted.default),tt._mount(c,null),n(j,c),n(D,c),n(B,D),n(I,D),n(J,D)},p:function(t,n){var r=n.$rounds;if(t.$players||t.$rounds){for(var s=0;s<r.length;s+=1)F[s]?F[s].p(t,n,r,r[s],s):(F[s]=M(n,r,r[s],s,e),F[s].c(),F[s].m(d,null));for(;s<F.length;s+=1)F[s].u(),F[s].d();F.length=r.length}var o={};o.query=L({maxWidth:600}),Z._set(o);var i=n.$players;if(t.$players){for(s=0;s<i.length;s+=1)G[s]?G[s].p(t,n,i,i[s],s):(G[s]=q(0,0,i[s]),G[s].c(),G[s].m(y,x));for(;s<G.length;s+=1)G[s].u(),G[s].d();G.length=i.length}var a=n.$rounds;if(t.$players||t.$rounds){for(s=0;s<a.length;s+=1)U[s]?U[s].p(t,n,a,a[s],s):(U[s]=A(n,a,a[s],s,e),U[s].c(),U[s].m(k,N));for(;s<U.length;s+=1)U[s].u(),U[s].d();U.length=a.length}var u=n.$players;if(t.totals||t.$players){for(s=0;s<u.length;s+=1)Y[s]?Y[s].p(t,n,u,u[s],s):(Y[s]=Q(n,0,u[s]),Y[s].c(),Y[s].m(P,O));for(;s<Y.length;s+=1)Y[s].u(),Y[s].d();Y.length=u.length}var c={};c.query=L({minWidth:601}),tt._set(c)},u:function(){s(c);for(var t=0;t<F.length;t+=1)F[t].u();for(t=0;t<G.length;t+=1)G[t].u();for(t=0;t<U.length;t+=1)U[t].u();for(t=0;t<Y.length;t+=1)Y[t].u()},d:function(){o(F),Z.destroy(!1),o(G),o(U),o(Y),tt.destroy(!1),h(B,"click",et),h(J,"click",nt)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,y(this._beforecreate),y(this._oncreate),y(this._aftercreate),this._lock=!1)}e(I.prototype,{nextRound:function(){var t=this.store.get(),e=t.rounds,n=t.players.reduce(function(t,e){return t[e]=0,t},{});e.push(n),this.store.set({rounds:e})},removeRound:function(t){var e=this.store.get("rounds").filter(function(e,n){return n!==t});this.store.set({rounds:e})},updateScore:function(t,e,n){var r=this.store.get("rounds"),s=+t.target.value,o=r.map(function(t,r){return r===n&&(t[e]=s),t});this.store.set({rounds:o})}},b),I.prototype._recompute=function(t,e){t.$rounds&&p(e.totals,e.totals=(n=e.$rounds,n.reduce(function(t,e){for(var n in e)t[n]=(t[n]||0)+e[n];return t},{})))&&(t.totals=!0);var n};function J(t,e){var n=new I({root:e.root});return e.refs.play=n,{c:function(){n._fragment.c()},m:function(t,e){n._mount(t,e)},u:function(){n._unmount()},d:function(){n.destroy(!1),e.refs.play===n&&(e.refs.play=null)}}}function T(t,e){var n=new C({root:e.root});return e.refs.choose=n,{c:function(){n._fragment.c()},m:function(t,e){n._mount(t,e)},u:function(){n._unmount()},d:function(){n.destroy(!1),e.refs.choose===n&&(e.refs.choose=null)}}}function F(t){return t.$started?J:T}function X(t){m(this,t),this.refs={},this._state=e(this.store._init(["started"]),t.data),this.store._add(this,["started"]),this._handlers.destroy=[$],t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var o,i,c,l=F(t),h=l(t,e);return{c:function(){o=a("div"),(i=a("h1")).textContent="Scorekeeper",c=u("\n\n    "),h.c(),this.h()},h:function(){o.className="container"},m:function(t,e){r(o,t,e),n(i,o),n(c,o),h.m(o,null)},p:function(t,n){l!==(l=F(n))&&(h.u(),h.d(),(h=l(n,e)).c(),h.m(o,null))},u:function(){s(o),h.u()},d:function(){h.d()}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,y(this._beforecreate),y(this._oncreate),y(this._aftercreate),this._lock=!1)}e(X.prototype,b);function Z(t){this._observers={pre:f(),post:f()},this._changeHandlers=[],this._dependents=[],this._computed=f(),this._sortedComputedProperties=[],this._state=e({},t)}e(Z.prototype,{_add:function(t,e){this._dependents.push({component:t,props:e})},_init:function(t){for(var e={},n=0;n<t.length;n+=1){var r=t[n];e["$"+r]=this._state[r]}return e},_remove:function(t){for(var e=this._dependents.length;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_sortComputedProperties:function(){var t,e=this._computed,n=this._sortedComputedProperties=[],r=f();function s(o){if(t[o])throw new Error("Cyclical dependency detected");if(!r[o]){r[o]=!0;var i=e[o];i&&(t[o]=!0,i.deps.forEach(s),n.push(i))}}for(var o in this._computed)t=f(),s(o)},compute:function(t,e,n){var r,s={deps:e,update:function(s,o,i){var a=e.map(function(t){return t in o&&(i=!0),s[t]});if(i){var u=n.apply(null,a);p(u,r)&&(r=u,o[t]=!0,s[t]=r)}}};s.update(this._state,{},!0),this._computed[t]=s,this._sortComputedProperties()},get:v,observe:g,onchange:function(t){return this._changeHandlers.push(t),{cancel:function(){var e=this._changeHandlers.indexOf(t);~e&&this._changeHandlers.splice(e,1)}}},set:function(t){var n=this._state,r=this._changed={},s=!1;for(var o in t){if(this._computed[o])throw new Error("'"+o+"' is a read-only property");p(t[o],n[o])&&(r[o]=s=!0)}if(s){this._state=e({},n,t);for(var i=0;i<this._sortedComputedProperties.length;i+=1)this._sortedComputedProperties[i].update(this._state,r);for(i=0;i<this._changeHandlers.length;i+=1)this._changeHandlers[i](this._state,r);_(this,this._observers.pre,r,this._state,n);var a=this._dependents.slice();for(i=0;i<a.length;i+=1){var u=a[i],c={};s=!1;for(var l=0;l<u.props.length;l+=1){var h=u.props[l];h in r&&(c["$"+h]=this._state[h],s=!0)}s&&u.component.set(c)}_(this,this._observers.post,r,this._state,n)}}});var z=new Z({players:[],rounds:[],started:!1});window.store=z,function(t,e){var n=localStorage.getItem(e);n&&t.set(JSON.parse(n)),t.onchange(function(t){localStorage.setItem(e,JSON.stringify(t))})}(z,"scorekeeper");return new X({target:document.body,store:z})}();
//# sourceMappingURL=bundle.js.map
