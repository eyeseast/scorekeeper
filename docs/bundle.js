var app=function(){"use strict";function t(){}function e(t){for(var e,n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(e in n)t[e]=n[e]}return t}function n(t,e){e.appendChild(t)}function r(t,e,n){e.insertBefore(t,n)}function s(t){t.parentNode.removeChild(t)}function o(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function i(){return document.createDocumentFragment()}function a(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function c(){return document.createComment("")}function h(t,e,n){t.addEventListener(e,n,!1)}function l(t,e,n){t.removeEventListener(e,n,!1)}function f(){return Object.create(null)}function d(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function p(t,e){return t!==e||t&&"object"==typeof t||"function"==typeof t}function _(t,e,n,r,s){for(var o in e)if(n[o]){var i=r[o],a=s[o],u=e[o];if(u)for(var c=0;c<u.length;c+=1){var h=u[c];h.__calling||(h.__calling=!0,h.call(t,i,a),h.__calling=!1)}}}function m(t){return t?this._state[t]:this._state}function v(t,e){t._observers={pre:f(),post:f()},t._handlers=f(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function g(t,e,n){var r=n&&n.defer?this._observers.post:this._observers.pre;return(r[t]||(r[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=r[t].indexOf(e);~n&&r[t].splice(n,1)}}}function y(t){for(;t&&t.length;)t.pop()()}function b(){this.store._remove(this)}var $={destroy:d,get:m,fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1)n[r].call(this,e)},observe:g,on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||(this.root._lock=!0,y(this.root._beforecreate),y(this.root._oncreate),y(this.root._aftercreate),this.root._lock=!1)},teardown:d,_recompute:t,_set:function(t){var n=this._state,r={},s=!1;for(var o in t)p(t[o],n[o])&&(r[o]=s=!0);s&&(this._state=e({},n,t),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(_(this,this._observers.pre,r,this._state,n),this._fragment.p(r,this._state),_(this,this._observers.post,r,this._state,n)))},_mount:function(t,e){this._fragment.m(t,e)},_unmount:function(){this._fragment&&this._fragment.u()}};function x(t,e,o,i,c){var f,d,p,_,m;return{c:function(){f=a("div"),d=a("input"),_=u("\n        "),(m=a("button")).textContent="x",this.h()},h:function(){d.type="text",d.value=p=o,d.name="players",m.type="button",m.className="button",m.title="Remove this player",h(m,"click",w),m._svelte={component:c,$players:e,i:i}},m:function(t,e){r(f,t,e),n(d,f),n(_,f),n(m,f)},p:function(t,e,n,r,s){t.$players&&p!==(p=r)&&(d.value=p),m._svelte.$players=n,m._svelte.i=s},u:function(){s(f)},d:function(){l(m,"click",w)}}}function w(t){var e=this._svelte.component,n=(this._svelte.$players,this._svelte.i);e.removePlayer(n)}function C(t){v(this,t),this.refs={},this._state=e(this.store._init(["players"]),t.data),this.store._add(this,["players"]),this._handlers.destroy=[b],this._fragment=function(t,e){for(var i,c,f,d,p,_,m,v,g,y=t.$players,b=[],$=0;$<y.length;$+=1)b[$]=x(0,y,y[$],$,e);function w(t){e.start(t)}function C(t){e.setPlayers(t)}return{c:function(){i=a("form"),c=a("div"),f=a("input"),d=u("\n        "),(p=a("button")).textContent="Add",_=u("\n    ");for(var t=0;t<b.length;t+=1)b[t].c();m=u("\n\n    "),v=a("div"),g=a("input"),this.h()},h:function(){f.type="text",f.name="players",f.placeholder="Add a player",p.className="button button-primary",g.type="submit",g.value="start",h(g,"click",w),i.className="row",h(i,"submit",C)},m:function(t,s){r(i,t,s),n(c,i),n(f,c),e.refs.newplayer=f,n(d,c),n(p,c),n(_,i);for(var o=0;o<b.length;o+=1)b[o].m(i,null);n(m,i),n(v,i),n(g,v),e.refs.form=i},p:function(t,n){var r=n.$players;if(t.$players){for(var s=0;s<r.length;s+=1)b[s]?b[s].p(t,n,r,r[s],s):(b[s]=x(0,r,r[s],s,e),b[s].c(),b[s].m(i,m));for(;s<b.length;s+=1)b[s].u(),b[s].d();b.length=r.length}},u:function(){s(i);for(var t=0;t<b.length;t+=1)b[t].u()},d:function(){e.refs.newplayer===f&&(e.refs.newplayer=null),o(b),l(g,"click",w),l(i,"submit",C),e.refs.form===i&&(e.refs.form=null)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}e(C.prototype,{setPlayers:function(t){t.preventDefault();var e,n=this.refs,r=n.form,s=n.newplayer;e=r.elements.players.length?Array.from(r.elements.players).map(function(t){return t.value}).filter(Boolean):[r.elements.players.value],this.store.set({players:e}),s.value=""},removePlayer:function(t){var e=this.store.get("players").filter(function(e,n){return n!==t});this.store.set({players:e})},start:function(t){this.setPlayers.call(this,t),this.store.set({started:!0})}},$);var k=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).toLowerCase()},N=function(t){var e="",n=Object.keys(t);return n.forEach(function(r,s){var o=t[r];r=k(r),/[height|width]$/.test(r)&&"number"==typeof o&&(o+="px");e+=!0===o?r:!1===o?"not "+r:"("+r+": "+o+")",s<n.length-1&&(e+=" and ")}),e},L=function(t){var e="";return"string"==typeof t?t:t instanceof Array?(t.forEach(function(n,r){e+=N(n),r<t.length-1&&(e+=", ")}),e):N(t)};function P(){this.mediaQueryList&&this.mediaQueryList.removeListener(this.updateMatches)}function S(e,n){var o,i,a=n._slotted.default;return{c:t,m:function(t,e){a&&(r(o||(o=c()),t,e),r(a,t,e),r(i||(i=c()),t,e))},u:function(){a&&(!function(t,e,n){for(;t.nextSibling&&t.nextSibling!==e;)n.appendChild(t.parentNode.removeChild(t.nextSibling))}(o,i,a),s(o),s(i))},d:t}}function E(t){v(this,t),this._state=e({matches:!0,query:null},t.data),this._handlers.destroy=[P],this._slotted=t.slots||{};var n=function(){var t=this.get().query;this.updateMatches=this.updateMatches.bind(this),this.mediaQueryList=window.matchMedia(t),this.mediaQueryList.addListener(this.updateMatches),this.updateMatches()}.bind(this);t.root?this.root._oncreate.push(n):this._oncreate=[n],this.slots={},this._fragment=function(t,e){var n,o=t.matches&&S(0,e);return{c:function(){o&&o.c(),n=c()},m:function(t,e){o&&o.m(t,e),r(n,t,e)},p:function(t,r){r.matches?o||((o=S(0,e)).c(),o.m(n.parentNode,n)):o&&(o.u(),o.d(),o=null)},u:function(){o&&o.u(),s(n)},d:function(){o&&o.d()}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),y(this._oncreate))}e(E.prototype,{updateMatches:function(t){this.mediaQueryList&&this.set({matches:this.mediaQueryList.matches})}},$);function R(t,e,i,c,h){for(var l,f,d,p,_,m=c+1,v=t.$players,g=[],y=0;y<v.length;y+=1)g[y]=M(t,e,i,c,v,v[y],y,h);return{c:function(){l=a("dl"),f=a("dt"),d=u("Round "),p=u(m),_=a("dd");for(var t=0;t<g.length;t+=1)g[t].c()},m:function(t,e){r(l,t,e),n(f,l),n(d,f),n(p,f),n(_,l);for(var s=0;s<g.length;s+=1)g[s].m(l,null)},p:function(t,e,n,r,s){var o=e.$players;if(t.$players){for(var i=0;i<o.length;i+=1)g[i]?g[i].p(t,e,n,r,s,o,o[i],i):(g[i]=M(e,n,r,s,o,o[i],i,h),g[i].c(),g[i].m(l,null));for(;i<g.length;i+=1)g[i].u(),g[i].d();g.length=o.length}},u:function(){s(l);for(var t=0;t<g.length;t+=1)g[t].u()},d:function(){o(g)}}}function M(e,o,i,c,h,l,f,d){var p,_,m=l;return{c:function(){p=a("dt"),_=u(m)},m:function(t,e){r(p,t,e),n(_,p)},p:function(t,e,n,r,s,o,i,a){t.$players&&m!==(m=i)&&(_.data=m)},u:function(){s(p)},d:t}}function O(e,o,i,c,h){var l,f,d=i;return{c:function(){l=a("th"),f=u(d)},m:function(t,e){r(l,t,e),n(f,l)},p:function(t,e,n,r,s){t.$players&&d!==(d=r)&&(f.data=d)},u:function(){s(l)},d:t}}function q(t,e,i,c,f){for(var d,p,_,m,v,g,y,b=c+1,$=t.$players,x=[],w=0;w<$.length;w+=1)x[w]=A(t,e,i,c,$,$[w],w,f);return{c:function(){d=a("tr"),p=a("td"),_=u(b),m=u("\n                ");for(var t=0;t<x.length;t+=1)x[t].c();v=u("\n\n                "),g=a("td"),(y=a("button")).textContent="x",this.h()},h:function(){!function(t){e="svelte-1097199461",n="",t.setAttribute(e,n);var e,n}(y),y.className="x-round button",h(y,"click",W),y._svelte={component:f,$rounds_1:e,i:c}},m:function(t,e){r(d,t,e),n(p,d),n(_,p),n(m,d);for(var s=0;s<x.length;s+=1)x[s].m(d,null);n(v,d),n(g,d),n(y,g)},p:function(t,e,n,r,s){var o=e.$players;if(t.$rounds||t.$players){for(var i=0;i<o.length;i+=1)x[i]?x[i].p(t,e,n,r,s,o,o[i],i):(x[i]=A(e,n,r,s,o,o[i],i,f),x[i].c(),x[i].m(d,v));for(;i<x.length;i+=1)x[i].u(),x[i].d();x.length=o.length}y._svelte.$rounds_1=n,y._svelte.i=s},u:function(){s(d);for(var t=0;t<x.length;t+=1)x[t].u()},d:function(){o(x),l(y,"click",W)}}}function A(t,e,o,i,u,c,f,d){var p,_,m;return{c:function(){p=a("td"),_=a("input"),this.h()},h:function(){_.type="number",_.value=m=o[c],h(_,"input",Q),_._svelte={component:d,$players:u,player_index:f,$rounds_1:e,i:i}},m:function(t,e){r(p,t,e),n(_,p)},p:function(t,e,n,r,s,o,i,a){(t.$rounds||t.$players)&&m!==(m=r[i])&&(_.value=m),_._svelte.$players=o,_._svelte.player_index=a,_._svelte.$rounds_1=n,_._svelte.i=s},u:function(){s(p)},d:function(){l(_,"input",Q)}}}function H(e,o,i,c,h){var l,f,d=e.totals[i]||0;return{c:function(){l=a("td"),f=u(d)},m:function(t,e){r(l,t,e),n(f,l)},p:function(t,e,n,r,s){(t.totals||t.$players)&&d!==(d=e.totals[r]||0)&&(f.data=d)},u:function(){s(l)},d:t}}function Q(t){var e=this._svelte.component,n=this._svelte.$players[this._svelte.player_index],r=(this._svelte.$rounds_1,this._svelte.i);e.updateScore(t,n,r)}function W(t){var e=this._svelte.component,n=(this._svelte.$rounds_1,this._svelte.i);e.removeRound(n)}function j(t){v(this,t),this.refs={},this._state=e(this.store._init(["rounds","players"]),t.data),this.store._add(this,["rounds","players"]),this._recompute({$rounds:1},this._state),this._handlers.destroy=[b];var c=function(){this.store.get("rounds").length<1&&this.nextRound()}.bind(this);t.root?this.root._oncreate.push(c):(this._oncreate=[c],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){for(var c,f,d,p,_,m,v,g,y,b,$,x,w,C,k,N,P,S,M,A,Q,W,j,D,B,I,J,T=t.$rounds,F=[],Z=0;Z<T.length;Z+=1)F[Z]=R(t,T,T[Z],Z,e);var z=new E({root:e.root,slots:{default:i()},data:{query:L({maxWidth:600})}});e.refs.media=z;var G=t.$players,K=[];for(Z=0;Z<G.length;Z+=1)K[Z]=O(0,0,G[Z]);var U=t.$rounds,V=[];for(Z=0;Z<U.length;Z+=1)V[Z]=q(t,U,U[Z],Z,e);var X=t.$players,Y=[];for(Z=0;Z<X.length;Z+=1)Y[Z]=H(t,0,X[Z]);var tt=new E({root:e.root,slots:{default:i()},data:{query:L({minWidth:601})}});function et(t){e.nextRound()}function nt(t){e.store.set({started:!1})}return{c:function(){c=a("div"),f=u("\n        "),d=a("div");for(var t=0;t<F.length;t+=1)F[t].c();for(p=u("\n    "),z._fragment.c(),_=u("\n\n    "),m=u("\n    "),v=a("table"),g=a("thead"),y=a("tr"),(b=a("th")).textContent="Round #",$=u("\n                "),t=0;t<K.length;t+=1)K[t].c();for(x=u("\n                "),(w=a("th")).textContent="Discard",C=u("\n        "),k=a("tbody"),t=0;t<V.length;t+=1)V[t].c();for(N=u("\n\n            "),P=a("tr"),(S=a("td")).textContent="Totals:",M=u("\n                "),t=0;t<Y.length;t+=1)Y[t].c();A=u("\n                "),Q=a("td"),W=u("\n    "),tt._fragment.c(),j=u("\n    "),D=a("div"),(B=a("button")).textContent="Next round",I=u("\n        "),(J=a("button")).textContent="Change players",this.h()},h:function(){d.className="twelve columns",P.className="totals",v.className="twelve columns",B.className="button button-primary",h(B,"click",et),J.className="button",h(J,"click",nt),c.className="row"},m:function(t,e){r(c,t,e),n(f,z._slotted.default),n(d,z._slotted.default);for(var s=0;s<F.length;s+=1)F[s].m(d,null);for(n(p,z._slotted.default),z._mount(c,null),n(_,c),n(m,tt._slotted.default),n(v,tt._slotted.default),n(g,v),n(y,g),n(b,y),n($,y),s=0;s<K.length;s+=1)K[s].m(y,null);for(n(x,y),n(w,y),n(C,v),n(k,v),s=0;s<V.length;s+=1)V[s].m(k,null);for(n(N,k),n(P,k),n(S,P),n(M,P),s=0;s<Y.length;s+=1)Y[s].m(P,null);n(A,P),n(Q,P),n(W,tt._slotted.default),tt._mount(c,null),n(j,c),n(D,c),n(B,D),n(I,D),n(J,D)},p:function(t,n){var r=n.$rounds;if(t.$players||t.$rounds){for(var s=0;s<r.length;s+=1)F[s]?F[s].p(t,n,r,r[s],s):(F[s]=R(n,r,r[s],s,e),F[s].c(),F[s].m(d,null));for(;s<F.length;s+=1)F[s].u(),F[s].d();F.length=r.length}var o={};o.query=L({maxWidth:600}),z._set(o);var i=n.$players;if(t.$players){for(s=0;s<i.length;s+=1)K[s]?K[s].p(t,n,i,i[s],s):(K[s]=O(0,0,i[s]),K[s].c(),K[s].m(y,x));for(;s<K.length;s+=1)K[s].u(),K[s].d();K.length=i.length}var a=n.$rounds;if(t.$players||t.$rounds){for(s=0;s<a.length;s+=1)V[s]?V[s].p(t,n,a,a[s],s):(V[s]=q(n,a,a[s],s,e),V[s].c(),V[s].m(k,N));for(;s<V.length;s+=1)V[s].u(),V[s].d();V.length=a.length}var u=n.$players;if(t.totals||t.$players){for(s=0;s<u.length;s+=1)Y[s]?Y[s].p(t,n,u,u[s],s):(Y[s]=H(n,0,u[s]),Y[s].c(),Y[s].m(P,A));for(;s<Y.length;s+=1)Y[s].u(),Y[s].d();Y.length=u.length}var c={};c.query=L({minWidth:601}),tt._set(c)},u:function(){s(c);for(var t=0;t<F.length;t+=1)F[t].u();for(t=0;t<K.length;t+=1)K[t].u();for(t=0;t<V.length;t+=1)V[t].u();for(t=0;t<Y.length;t+=1)Y[t].u()},d:function(){o(F),z.destroy(!1),e.refs.media===z&&(e.refs.media=null),o(K),o(V),o(Y),tt.destroy(!1),l(B,"click",et),l(J,"click",nt)}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,y(this._beforecreate),y(this._oncreate),y(this._aftercreate),this._lock=!1)}e(j.prototype,{nextRound:function(){var t=this.store.get(),e=t.rounds,n=t.players.reduce(function(t,e){return t[e]=0,t},{});e.push(n),this.store.set({rounds:e})},removeRound:function(t){var e=this.store.get("rounds").filter(function(e,n){return n!==t});this.store.set({rounds:e})},updateScore:function(t,e,n){var r=this.store.get("rounds"),s=+t.target.value,o=r.map(function(t,r){return r===n&&(t[e]=s),t});this.store.set({rounds:o})}},$),j.prototype._recompute=function(t,e){t.$rounds&&p(e.totals,e.totals=(n=e.$rounds,n.reduce(function(t,e){for(var n in e)t[n]=(t[n]||0)+e[n];return t},{})))&&(t.totals=!0);var n};function D(t,e){var n=new j({root:e.root});return e.refs.play=n,{c:function(){n._fragment.c()},m:function(t,e){n._mount(t,e)},u:function(){n._unmount()},d:function(){n.destroy(!1),e.refs.play===n&&(e.refs.play=null)}}}function B(t,e){var n=new C({root:e.root});return e.refs.choose=n,{c:function(){n._fragment.c()},m:function(t,e){n._mount(t,e)},u:function(){n._unmount()},d:function(){n.destroy(!1),e.refs.choose===n&&(e.refs.choose=null)}}}function I(t){return t.$started?D:B}function J(t){v(this,t),this.refs={},this._state=e(this.store._init(["started"]),t.data),this.store._add(this,["started"]),this._handlers.destroy=[b],t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var o,i,c,h=I(t),l=h(t,e);return{c:function(){o=a("div"),(i=a("h1")).textContent="Scorekeeper",c=u("\n\n    "),l.c(),this.h()},h:function(){o.className="container"},m:function(t,e){r(o,t,e),n(i,o),n(c,o),l.m(o,null)},p:function(t,n){h!==(h=I(n))&&(l.u(),l.d(),(l=h(n,e)).c(),l.m(o,null))},u:function(){s(o),l.u()},d:function(){l.d()}}}(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,y(this._beforecreate),y(this._oncreate),y(this._aftercreate),this._lock=!1)}e(J.prototype,$);function T(t){this._observers={pre:f(),post:f()},this._changeHandlers=[],this._dependents=[],this._computed=f(),this._sortedComputedProperties=[],this._state=e({},t)}e(T.prototype,{_add:function(t,e){this._dependents.push({component:t,props:e})},_init:function(t){for(var e={},n=0;n<t.length;n+=1){var r=t[n];e["$"+r]=this._state[r]}return e},_remove:function(t){for(var e=this._dependents.length;e--;)if(this._dependents[e].component===t)return void this._dependents.splice(e,1)},_sortComputedProperties:function(){var t,e=this._computed,n=this._sortedComputedProperties=[],r=f();function s(o){if(t[o])throw new Error("Cyclical dependency detected");if(!r[o]){r[o]=!0;var i=e[o];i&&(t[o]=!0,i.deps.forEach(s),n.push(i))}}for(var o in this._computed)t=f(),s(o)},compute:function(t,e,n){var r,s={deps:e,update:function(s,o,i){var a=e.map(function(t){return t in o&&(i=!0),s[t]});if(i){var u=n.apply(null,a);p(u,r)&&(r=u,o[t]=!0,s[t]=r)}}};s.update(this._state,{},!0),this._computed[t]=s,this._sortComputedProperties()},get:m,observe:g,onchange:function(t){return this._changeHandlers.push(t),{cancel:function(){var e=this._changeHandlers.indexOf(t);~e&&this._changeHandlers.splice(e,1)}}},set:function(t){var n=this._state,r=this._changed={},s=!1;for(var o in t){if(this._computed[o])throw new Error("'"+o+"' is a read-only property");p(t[o],n[o])&&(r[o]=s=!0)}if(s){this._state=e({},n,t);for(var i=0;i<this._sortedComputedProperties.length;i+=1)this._sortedComputedProperties[i].update(this._state,r);for(i=0;i<this._changeHandlers.length;i+=1)this._changeHandlers[i](this._state,r);_(this,this._observers.pre,r,this._state,n);var a=this._dependents.slice();for(i=0;i<a.length;i+=1){var u=a[i],c={};s=!1;for(var h=0;h<u.props.length;h+=1){var l=u.props[h];l in r&&(c["$"+l]=this._state[l],s=!0)}s&&u.component.set(c)}_(this,this._observers.post,r,this._state,n)}}});var F=new T({players:[],rounds:[],started:!1});window.store=F,function(t,e){var n=localStorage.getItem(e);n&&t.set(JSON.parse(n)),t.onchange(function(t){localStorage.setItem(e,JSON.stringify(t))})}(F,"scorekeeper");return new J({target:document.body,store:F})}();
//# sourceMappingURL=bundle.js.map
